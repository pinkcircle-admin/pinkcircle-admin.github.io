(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{520:function(e,t,o){"use strict";o.r(t);var n=o(23),r=o(9),l=(o(37),o(12),o(31),o(32),o(338),o(50),o(51),o(427)),c=o.n(l),d=(o(428),o(429),o(430)),m=o.n(d),v=o(431),f=o.n(v),_={layout:"app",components:{FilePond:c()(m.a,f.a),"ckeditor-nuxt":function(){return o.e(38).then(o.t.bind(null,508,7))}},data:function(){return{isLoading:!1,submiting:!0,editorConfig:{removePlugins:["Title"]},blog:{},categories:[]}},head:function(){return{title:"Blog Detail"}},created:function(){this.fetchBlog()},methods:{fetchBlog:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,e.$axios.$get("/api/admin/blogs/"+e.$route.params.id);case 6:o=t.sent,e.blog=o.blog,e.categories=o.categories,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e.$toast.error(t.t0.response.data.message),console.error(t.t0);case 15:return t.prev=15,e.isLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},update:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,l,c,d,m,v,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e.submiting=!0,o=new FormData,r=["title","description","content","is_featured","is_top","is_fundraising","category_id"],l=0,c=Object.entries(e.blog);l<c.length;l++)d=Object(n.a)(c[l],2),m=d[0],v=d[1],r.includes(m)&&o.append(m,v);return o.append("thumbnail",e.$refs.pond.getFile().file),t.prev=5,t.next=8,e.$axios.post("/api/admin/blogs/"+e.blog.id,o,{headers:{"content-type":"multipart/form-data"}});case 8:f=t.sent,e.$toast.success(f.data.message),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.$toast.error(t.t0.response.data.message);case 15:return t.prev=15,e.submiting=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[5,12,15,18]])})))()}}},h=o(16),component=Object(h.a)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[e.isLoading?o("div",{staticClass:"p-5"},[e._m(0)]):o("div",{staticClass:"card card-custom gutter-b"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-12 col-xl-12"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Title:")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.blog.title,expression:"blog.title"}],staticClass:"form-control form-control-lg form-control-solid",attrs:{type:"text"},domProps:{value:e.blog.title},on:{input:function(t){t.target.composing||e.$set(e.blog,"title",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-lg-12 col-xl-12 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Description:")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.blog.description,expression:"blog.description"}],staticClass:"form-control form-control-lg form-control-solid",attrs:{rows:"4"},domProps:{value:e.blog.description},on:{input:function(t){t.target.composing||e.$set(e.blog,"description",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"col-lg-12 col-xl-12 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Content:")]),e._v(" "),o("client-only",{attrs:{placeholder:"loading..."}},[o("ckeditor-nuxt",{attrs:{config:e.editorConfig},model:{value:e.blog.content,callback:function(t){e.$set(e.blog,"content",t)},expression:"blog.content"}})],1)],1),e._v(" "),o("div",{staticClass:"col-lg-6 col-xl-6 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Thumbnail:")]),e._v(" "),o("file-pond",{ref:"pond",attrs:{name:"selectImages","label-idle":"Upload Thumbnail","allow-multiple":!1,"accepted-file-types":"image/jpeg, image/png",maxFiles:"10",files:e.blog.thumbnail_url,credits:""}})],1),e._v(" "),o("div",{staticClass:"col-lg-2 col-xl-2 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Is Featured:")]),e._v(" "),o("span",{staticClass:"switch"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.blog.is_featured,expression:"blog.is_featured"}],attrs:{type:"checkbox",checked:"checked"},domProps:{checked:Array.isArray(e.blog.is_featured)?e._i(e.blog.is_featured,null)>-1:e.blog.is_featured},on:{change:function(t){var o=e.blog.is_featured,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=e._i(o,null);n.checked?l<0&&e.$set(e.blog,"is_featured",o.concat([null])):l>-1&&e.$set(e.blog,"is_featured",o.slice(0,l).concat(o.slice(l+1)))}else e.$set(e.blog,"is_featured",r)}}}),e._v(" "),o("span")])])]),e._v(" "),o("div",{staticClass:"col-lg-2 col-xl-2 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Is Top:")]),e._v(" "),o("span",{staticClass:"switch"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.blog.is_top,expression:"blog.is_top"}],attrs:{type:"checkbox",checked:"checked"},domProps:{checked:Array.isArray(e.blog.is_top)?e._i(e.blog.is_top,null)>-1:e.blog.is_top},on:{change:function(t){var o=e.blog.is_top,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=e._i(o,null);n.checked?l<0&&e.$set(e.blog,"is_top",o.concat([null])):l>-1&&e.$set(e.blog,"is_top",o.slice(0,l).concat(o.slice(l+1)))}else e.$set(e.blog,"is_top",r)}}}),e._v(" "),o("span")])])]),e._v(" "),o("div",{staticClass:"col-lg-2 col-xl-2 mt-5"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Is Fundraising:")]),e._v(" "),o("span",{staticClass:"switch"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.blog.is_fundraising,expression:"blog.is_fundraising"}],attrs:{type:"checkbox",checked:"checked"},domProps:{checked:Array.isArray(e.blog.is_fundraising)?e._i(e.blog.is_fundraising,null)>-1:e.blog.is_fundraising},on:{change:function(t){var o=e.blog.is_fundraising,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=e._i(o,null);n.checked?l<0&&e.$set(e.blog,"is_fundraising",o.concat([null])):l>-1&&e.$set(e.blog,"is_fundraising",o.slice(0,l).concat(o.slice(l+1)))}else e.$set(e.blog,"is_fundraising",r)}}}),e._v(" "),o("span")])])]),e._v(" "),o("div",{staticClass:"col-lg-6 col-xl-6 mt-5"},[o("div",{staticClass:"form-group"},[o("h3",{staticClass:"font-size-h6 mb-5"},[e._v("Category:")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.blog.category_id,expression:"blog.category_id"}],staticClass:"form-control",attrs:{id:"category"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.blog,"category_id",t.target.multiple?o:o[0])}}},e._l(e.categories,(function(t,n){return o("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])]),e._v(" "),o("hr"),e._v(" "),o("div",{staticClass:"col-lg-12 col-xl-12 mt-5 text-right"},[o("button",{staticClass:"btn btn-primary font-weight-bold",on:{click:e.update}},[e._v("Save Changes")])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex align-items-center justify-content-center p-5"},[t("div",{staticClass:"spinner spinner-primary spinner-lg mr-15"})])}],!1,null,"af318c3e",null);t.default=component.exports}}]);